# 快速启动指南: 高亮交互优化

**功能分支**: `003-highlight-interaction`
**创建时间**: 2025-12-15

## 前提条件

- 已完成 001-web-clipper-core 功能的实现
- Chrome 88+ 或 Edge 88+ 浏览器
- 扩展已加载到浏览器

## 功能验证步骤

### 步骤 1: 创建测试高亮

1. 访问任意包含文章内容的网页
2. 选中一段文本
3. 使用高亮菜单创建一个带笔记的高亮
4. 再创建一个不带笔记的纯高亮

### 步骤 2: 测试悬停浮窗 (US1)

1. 将鼠标移动到**带笔记的高亮**上
2. **预期**: 200ms 后显示浮窗，展示笔记内容
3. 将鼠标移出高亮区域
4. **预期**: 300ms 后浮窗消失
5. 将鼠标移动到**不带笔记的高亮**上
6. **预期**: 不显示浮窗

### 步骤 3: 测试点击编辑 (US2)

1. 点击任意高亮区域
2. **预期**: 立即显示笔记编辑器
3. 如果是带笔记的高亮，编辑器应预填充现有内容
4. 修改笔记内容，点击"保存"按钮
5. **预期**: 编辑器关闭，再次悬停可看到更新的内容
6. 再次点击高亮，按 Escape 键
7. **预期**: 编辑器关闭，内容未保存

### 步骤 4: 测试删除高亮 (US3)

1. 点击一个高亮区域打开编辑器
2. 点击"删除高亮"按钮
3. **预期**: 显示确认对话框
4. 点击"确认删除"
5. **预期**: 高亮消失，文本恢复为普通文本

### 步骤 5: 边界情况测试

| 测试场景 | 操作 | 预期结果 |
|----------|------|----------|
| 页面边缘高亮 | 在页面右下角创建高亮并悬停 | 浮窗自动调整位置，保持在视口内 |
| 快速移动鼠标 | 快速在多个高亮间移动 | 无浮窗闪烁 |
| 长笔记内容 | 添加超长笔记（100+ 字符）并悬停 | 浮窗显示滚动条 |
| 快捷键 | 在编辑器中按 Enter | 保存并关闭 |
| 点击外部 | 编辑器打开时点击页面其他位置 | 编辑器关闭 |

## 性能验证

- 浮窗显示延迟: < 200ms
- 编辑器显示延迟: < 100ms
- 无 UI 卡顿或闪烁

## 验收检查清单

### 悬停浮窗 (US1)
- [ ] 悬停带笔记的高亮时显示浮窗
- [ ] 浮窗正确显示笔记内容
- [ ] 鼠标移出后浮窗延迟消失
- [ ] 鼠标移入浮窗时浮窗保持显示
- [ ] 悬停纯高亮时不显示浮窗

### 点击编辑 (US2)
- [ ] 点击高亮打开编辑器
- [ ] 编辑器预填充现有笔记
- [ ] 保存按钮工作正常
- [ ] 取消按钮工作正常
- [ ] Enter 快捷键保存
- [ ] Escape 快捷键取消
- [ ] 点击外部关闭编辑器

### 删除高亮 (US3)
- [ ] 删除按钮显示确认提示
- [ ] 确认后高亮被移除
- [ ] 取消后返回编辑器
- [ ] 高亮文本恢复为普通文本

### 边界情况
- [ ] 页面边缘位置正确
- [ ] 无浮窗闪烁
- [ ] 长内容可滚动
